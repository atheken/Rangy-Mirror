<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>Rangy Selection save/restore module demo</title>
    <script type="text/javascript" src="../lib/log4javascript.js"></script>
    <script type="text/javascript" src="../src/js/core/core.js"></script>
    <script type="text/javascript" src="../src/js/core/dom.js"></script>
    <script type="text/javascript" src="../src/js/core/domrange.js"></script>
    <script type="text/javascript" src="../src/js/core/wrappedrange.js"></script>
    <script type="text/javascript" src="../src/js/core/wrappedselection.js"></script>
    <script type="text/javascript" src="../src/js/modules/rangy-selectionsaverestore.js"></script>
    <script type="text/javascript">

        window.onload = function() {
            rangy.init();

            var saveRestoreModule = rangy.modules.SaveRestore;
            if (saveRestoreModule && saveRestoreModule.supported) {
                var saveButton = document.getElementById("saveButton");
                var savedSelection;

                saveButton.onclick = function() {
                    if (savedSelection) {
                        rangy.removeMarkers(savedSelection);
                    }
                    savedSelection = rangy.saveSelection();
                    document.getElementById("restoreButton").disabled = false;
                };

                saveButton.disabled = false;

                var restoreButton = document.getElementById("restoreButton");
                restoreButton.onclick = function() {
                    if (savedSelection) {
                        rangy.restoreSelection(savedSelection);
                        savedSelection = null;
                        document.getElementById("restoreButton").disabled = true;
                        document.getElementById("editable").focus();
                    }
                };

                saveButton = restoreButton = null;
            }
        }
    </script>
</head>
<body>
    <h1>Selection save/restore test</h1>

    <p>Below is some editable content:</p>
    <p id="editable" contenteditable="true" style="border: solid green 1px; background-color: lightgoldenrodyellow;">
        The <b>cabbage</b> is a popular <a href="#" title="Cultivar">cultivar</a> of a the species
        <i><a href="#" title="Brassica oleracea">Brassica oleracea</a> Linne</i> (Capitata Group)
        of the Family <a href="#" title="Brassicaceae">Brassicaceae</a> (or Cruciferae), and is used as
        a leafy green <a href="#" title="Leaf vegetable">vegetable</a>. It is a
        <a href="#" title="Herbaceous" class="mw-redirect">herbaceous</a>,
        <a href="#t" title="Biennial plant">biennial</a>,
        <a href="#" title="Dicot" class="mw-redirect">dicotyledonous</a>

        <a href="#" title="Flowering plant">flowering plant</a> distinguished by a short stem upon
        which is crowded a mass of leaves, usually green but in some varieties red or purplish, which while immature
        form a characteristic compact, globular cluster (<i>cabbagehead</i>).
    </p>
    <input id="saveButton" type="button" disabled value="Save selection">
    <input id="restoreButton" type="button" disabled value="Restore selection">
    <p>
    	Select something in the editable area above. Click on the "Save selection" button. Now click somewhere on the
    	page to destroy the selection, and then press "Restore selection".
    </p>
</body>
</html>